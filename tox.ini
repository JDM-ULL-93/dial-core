[tox]
envlist = clean,py{36,37}-pyside{512,513,514}

[testenv]
passenv = CI TRAVIS TRAVIS_*
deps =
  -r{toxinidir}/tox/requirements.txt
  -r{toxinidir}/requirements-test.txt
  pyside512: -r{toxinidir}/tox/requirements-pyside-5.12.txt
  pyside513: -r{toxinidir}/tox/requirements-pyside-5.13.txt
  pyside514: -r{toxinidir}/tox/requirements-pyside-5.14.txt

commands =
  pytest

[testenv:clean]
deps = coverage
skip_install = true
commands = coverage erase

[pytest]
addopts = -p no:warnings

# Generate coverage only on this version
[testenv:py37-pyside514]
commands =
  pytest --cov {envsitepackagesdir}/dial --cov-append --cov-report=term-missing
